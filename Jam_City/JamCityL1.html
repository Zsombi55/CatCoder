
<!-- Coding Contest, Jam City - Level 1 -->

<html>
    <!-- Input & calculations -->
    <head>
    <script>
        
        
        var list = []; // test to array for easier value manipulation.
        
        // Input file selection
        var openFile = function (event) {
            var input = event.target;
            var reader = new FileReader();
            reader.onload = function () {
                var text = reader.result;
                console.log("Type of the \"text\" variable: " + typeof text);
                var node = document.getElementById("output");
                node.innerText = text;
                console.log(reader.result.substring(0, 200));
                textToArray(text); // To Array
                var res = document.getElementById("results");
                res.innerText = OneLaneTimer(list); // Level 1: car times on one lane.
            };
            reader.readAsText(input.files[0]);
        };

        // First 2 "text" lines have only 1 number value each, the rest have 2 numbers separated by a comma each.
        // Turn the input "text" into an array, eg.: lines[ln1[v1], ln2[v2], ln3[v3, v4], ln4[v5, v6], ln5[v7, v8] ...].
        function textToArray(text){
            list = text.split("\n");
            for (var i = 0; i < list.length-1; i++) list[i] = list[i].split(",");
            list.pop(list.length-1);
            console.log(list);
            return list;
        }

        // Calculations
        function OneLaneTimer(list){ // L1 - Arrival times in a line separated only by a comma.
            var olt = [];
            for (i = 2; i < list.length; i++) {
                olt.push(list[i][1] - list[i][0] + 2);  
            }
            console.log(olt);
            return olt;
        }

    </script>
    </head>
    
    <!-- Output -->
    <body>
    <input type="file" accept="text/plain" onchange="openFile(event)"><br>
    <b>Input file content:</b>
    <div id="output">...</div><br>
    <b>Calculations' output:</b>
    <div id="results">...</div>
    </body>
    </html>